<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Rust Iterator Cheat Sheet</title>
<script class="build-only" type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script class="build-only" type="text/javascript" src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<style type="text/css">

table.summary {
    border-collapse: collapse;
    width: 100%;
}

table.summary tr {
    border-top: 1px black solid;
    border-bottom: 1px black solid;
}

table.summary td, table.summary th {
    padding: 0.5em 0.4em;
}

table.summary tr.tag-unstable {
    background-color: orange;
}

</style>
</head>
<body>
    <h1>Rust Iterator Cheat Sheet</h1>

    <p><strong>To-do:</strong></p>

    <ul>
        <li>Improve formatting.</li>
        <li>Try to fix display bugs (lines through cells).</li>
        <li>Add sorting... <em>somehow</em></li>
    </ul>

    <p><strong>How you can help:</strong></p>

    <p>I need feedback on what does and doesn't work.  Can you understand the summaries?  Do they mesh with how you perceive the methods in question work?  What other information could/should be included?</p>

    <p>If you have any corrections or suggestions, you can file them on <a href="https://github.com/DanielKeep/DanielKeep.github.io">the GitHub repository</a>.  The canonical source for this page is <code>src/itercheat/itercheat.html</code>.</p>

    <hr>

    <p>This summarises the iterator-related methods defined by the following Rust libraries:</p>

    <ul>
        <li><p><label><input class="lib-toggle" data-lib="std" id="lib-std" name="lib-std" type="checkbox" checked> <strong>Std</strong></label>: the Rust standard library.  Methods are defined on the <a href="http://doc.rust-lang.org/std/iter/trait.Iterator.html"><code>std::iter::Iterator</code></a> trait.</p></li>
        <li><p><label><input class="lib-toggle" data-lib="itertools" id="lib-itertools" name="lib-itertools" type="checkbox" checked> <strong>IT</strong></label>: the <a href="https://crates.io/crates/itertools"><code>itertools</code></a> library.  Methods are defined on the <a href="https://bluss.github.io/rust-itertools/doc/itertools/trait.Itertools.html"><code>itertools::Itertools</code></a> trait.</p></li>
    </ul>

    <p>Additional filtering options:</p>

    <ul>
        <li><p><label><input class="tag-toggle" data-tag="unstable" id="tag-unstable" name="tag-unstable" type="checkbox"> <strong>Unstable</strong></label>: show unstable methods.</p></li>
    </ul>

    <p>This is intended to be used in one of a few ways:</p>

    <ol>
        <li>You know what an iterator method is <em>called</em>, but you want a quick summary of what it does.</li>
        <li>You know what you want to <em>do with an iterator</em>, but not what it's called.</li>
        <li>You just want to browse through a summary of the available methods because you're bored.</li>
    </ol>

    <p>To keep the summary as compact as possible, various bits of notation and convention are used.  An incomplete list is:</p>

    <ul>
        <li><p>Most iterator methods take their first input <em>by-value</em>; those that don't are marked with a \(\text{&amp;mut}\) out the front of their first argument.</p></li>

        <li><p>Elements are <em>underlined</em> to indicate that the method <em>will not</em> compute those elements during the course of its own evaluation.</p></li>

        <li><p>\(\{\ldots\}\) is used to represent a lazily computed sequence; <em>i.e.</em> an iterator.</p></li>

        <li><p>\(\{\ldots\}:\{T\}\) indicates an iterator where each element is of type <code>T</code>.</p></li>

        <li><p>\(a\) and \(b\) are used as input sequences (with subscripted letters denoting individual elements).</p></li>

        <li><p>\(c\) is used to represent the output sequence in cases where there is no direct mapping of input elements to output elements.</p></li>

        <li><p>\(i\), \(j\), and \(k\) are used to denote specific, but arbitrary, points within sequences.</p></li>

        <li><p>\(n\), \(m\), and \(l\) are used to denote the length of different sequences.</p></li>

        <li><p>\([\ldots]\) is used to represent a collection of <em>arbitrary type</em>.  Typically, the exact type is inferred from context, and can be anything that implements the <code>FromIterator</code> trait.</p></li>

        <li><p>\(f\) is a function which transforms elements.</p></li>

        <li><p>\(p\) is a predicate which determines some logical property of elements.</p></li>

        <li><p>\(\circ\) is an arbitrary binary function.</p></li>

        <li><p>\(\text{wh.}\) is an abbreviation for "where".</p></li>
    </ul>

    <h2>Generators</h2>

    <table class="summary">
    <thead>
        <tr>
            <th>Lib</td>
            <th>Function</th>
            <th colspan="2">Input</th>
            <th>Output</th>
        </tr>
    </thead>
    <tbody>
        <tr data-tags="unstable">
            <td>Std</td>
            <td data-doc-link="http://doc.rust-lang.org/nightly/std/iter/fn.empty.html">empty</td>
            <td colspan="2"></td>
            <td>\(\{\}\)</td>
        </tr>

        <tr data-tags="unstable">
            <td>Std</td>
            <td data-doc-link="http://doc.rust-lang.org/nightly/std/iter/fn.iterate.html">iterate</td>
            <td>\(seed:T\)</td>
            <td>\(f: T \rightarrow T\)</td>
            <td>\(\{f(seed), f(f(seed)), \ldots\}\)</td>
        </tr>

        <tr data-tags="unstable">
            <td>Std</td>
            <td data-doc-link="http://doc.rust-lang.org/nightly/std/iter/fn.once.html">once</td>
            <td colspan="2">\(a\)</td>
            <td>\(\{a\}\)</td>
        </tr>

        <tr data-tags="unstable">
            <td>Std</td>
            <td data-doc-link="http://doc.rust-lang.org/nightly/std/iter/fn.range_inclusive.html">range_inclusive</td>
            <td>\(i\)</td>
            <td>\(j\)</td>
            <td>\(\{i, i+1, \ldots, j\}\)</td>
        </tr>

        <tr>
            <td>Std</td>
            <td data-doc-link="http://doc.rust-lang.org/std/iter/fn.repeat.html">repeat</td>
            <td colspan="2">\(a\)</td>
            <td>\(\{a, a, \ldots\}\)</td>
        </tr>
        <tr>
            <td>IT</td>
            <td data-doc-link="http://bluss.github.io/rust-itertools/doc/itertools/struct.RepeatCall.html#method.new">RepeatCall::new</td>
            <td colspan="2">\(f: () \rightarrow T\)</td>
            <td>\(\{f(), f(), \ldots\}\)</td>
        </tr>
    </tbody>
    </table>

    <h2>Sequences</h2>

    <table class="summary">
    <thead>
        <tr>
            <th>Lib</td>
            <th>Method</th>
            <th colspan="2">Input</th>
            <th>Output</th>
        </tr>
    </thead>
    <tbody>
        <tr class="cut-during-build">
            <td>IT</td>
            <td>batching</td>
            <td>\(\{\underbrace{a_0, \ldots}_{{}\rightarrow c_0},
                \underbrace{a_i,\ldots}_{{}\rightarrow c_1},
                \ldots\}:\{T\}\),</td>
            <td>\(batch : \text{&amp;mut }\{T\} \rightarrow U\)</td>
            <td>\(\{c_0, c_1, \ldots\}:\{U\}\)</td>
        </tr>
        <tr>
            <td>IT</td>
            <td>batching</td>
            <td>\(\{\underbrace{a_0, \ldots},
                \underbrace{a_i,\ldots},
                \ldots\}:\{T\}\),</td>
            <td>\(batch : \text{&amp;mut }\{T\} \rightarrow U\)</td>
            <td>\(\{\underbrace{c_0}_{batch(\{a_0, \ldots\})},
                \underbrace{c_1}_{batch(\{a_i, \ldots\})},
                \ldots\}:\{U\}\)</td>
        </tr>
        <tr class="cut-during-build">
            <td>IT</td>
            <td>batching</td>
            <td>\(\{\underbrace{a_0, \ldots, \underbrace{a_i, \ldots, \underbrace{a_j, \ldots}}}\}:\{T\}\),</td>
            <td>\(batch : \text{&amp;mut }\{T\} \rightarrow U\)</td>
            <td>\(\{\underbrace{c_0}_{batch(\{a_0, \ldots\})},
                \underbrace{c_1}_{batch(\{a_i, \ldots\})},
                \underbrace{c_2}_{batch(\{a_j, \ldots\})},
                \ldots\}:\{U\}\)</td>
        </tr>

        <tr>
            <td>IT</td>
            <td>cartesian_product</td>
            <td>\(\{a_0, a_1, \ldots, a_{n-1}\}\),</td>
            <td>\(\{b_0, b_1, \ldots, b_{m-1}\}\)</td>
            <td>\(\{(a_0, b_0), (a_0, b_1), \ldots, (a_0, b_{m-1}),\\~~
                (a_1, b_0), (a_1, b_1), \ldots, (a_1, b_{m-1})\\~~
                \ldots,\\~~
                (a_{n-1}, b_0), (a_{n-1}, b_1), \ldots, (a_{n-1}, b_{m-1})\}\)</td>
        </tr>

        <tr>
            <td>Std</td>
            <td>chain</td>
            <td>\(\{a_0, \ldots, a_{n-1}\}\),</td>
            <td>\(\{b_0, \ldots, b_{m-1}\}\)</td>
            <td>\(\{a_0, \ldots, a_{n-1}, b_0, \ldots, b_{m-1}\}\)</td>
        </tr>

        <tr>
            <td>IT</td>
            <td>coalesce</td>
            <td>\(\{a_0, a_1, a_2, \ldots\}\)</td>
            <td>\(f : (T,T) \rightarrow \text{Ok}(T) ~|~ \text{Err}((T, T))\)</td>
            <td>
                \(
                    \begin{array}{llcl}
                    &amp; \{x_0, \ldots\} &amp;\text{wh.}&amp;
                        \left\{\begin{array}{l}
                            f(a_0, a_1) = \text{Ok}(x_0), \\
                            \ldots
                        \end{array}\right. \\
                    \text{or} &amp; \{a'_0, x_1, \ldots\} &amp;\text{wh.}&amp;
                        \left\{\begin{array}{l}
                            f(a_0, a_1) = \text{Err}((a'_0, a'_1)), \\
                            f(a'_1, a_2) = \text{Ok}(x_1), \\
                            \ldots
                        \end{array}\right. \\
                    \text{or} &amp; \{a'_0, a''_1, \ldots\} &amp;\text{wh.}&amp;
                        \left\{\begin{array}{l}
                            f(a_0, a_1) = \text{Err}((a'_0, a'_1)), \\
                            f(a'_1, a_2) = \text{Err}(a''_1, a'_2), \\
                            \ldots
                        \end{array}\right.
                    \end{array}
                \)
            </td>
        </tr>

        <tr>
            <td>Std</td>
            <td>collect</td>
            <td colspan="2">\(\{a_0, \ldots\}\)</td>
            <td>\([a_0, \ldots]\)</td>
        </tr>

        <tr>
            <td>IT</td>
            <td>collect_vec</td>
            <td colspan="2">\(\{a_0, \ldots\}\)</td>
            <td>\([a_0, \ldots] : \text{Vec}\langle T\rangle\)</td>
        </tr>

        <tr>
            <td>IT</td>
            <td>combinations</td>
            <td colspan="2">\(\{a_0, a_1, a_2, \ldots, a_{n-2}, a_{n-1}\}\)</td>
            <td>\(\{
                (a_0, a_1), (a_0, a_2), \ldots, (a_0, a_{n-2}), (a_0, a_{n-1}),\\~~
                (a_1, a_2), \ldots, (a_1, a_{n-2}), (a_1, a_{n-1}),\\~~
                \ldots,\\~~
                (a_{n-2}, a_{n-1})\}\)</td>
        </tr>

        <tr>
            <td>Std</td>
            <td>cycle</td>
            <td colspan="2">\(\{a_0, \ldots, a_{n-1}\}\)</td>
            <td>\(\{a_0, \ldots, a_{n-1}, a_0, \ldots, a_{n-1}, \ldots\}\)</td>
        </tr>

        <tr>
            <td>IT</td>
            <td>dedup</td>
            <td colspan="2">\(\{\underbrace{a_0, a_0, \ldots}, \underbrace{a_1, a_1, \ldots}, \ldots\}\)</td>
            <td>\(\{a_0, a_1, \ldots\}\)</td>
        </tr>

        <tr>
            <td rowspan="2">IT</td>
            <td rowspan="2">dropping</td>
            <td>\(\{\underbrace{a_0, \ldots, a_{i-1}}_{\text{consumed}}, a_i, \ldots\}\)</td>
            <td>\(i \text{ wh. } i \lt n\)</td>
            <td>\(\{a_i, \ldots\}\) (consumes \(a_0 \ldots a_{i-1}\) immediately)</td>
        </tr>
        <tr>
            <td>\(\{\underbrace{a_0, \ldots, a_{n-1}}_{\text{consumed}}\}\)</td>
            <td>\(i \text{ wh. } i \ge n\)</td>
            <td>\(\{\}\) (consumes \(a_0 \ldots a_{n-1}\) immediately)</td>
        </tr>

        <tr>
            <td rowspan="2">IT</td>
            <td rowspan="2">dropping_back</td>
            <td>\(\{a_0, \ldots, a_{n-i-1}, \underbrace{a_{n-i}, \ldots, a_{n-1}}_{\text{consumed}}\}\)</td>
            <td>\(i \text{ wh. } i \lt n\)</td>
            <td>\(\{a_0, \ldots, a_{n-i-1}\}\) (consumes \(a_{n-i} \ldots a_n\) immediately)</td>
        </tr>
        <tr>
            <td>\(\{\underbrace{a_0, \ldots, a_{n-1}}_{\text{consumed}}\}\)</td>
            <td>\(i \text{ wh. } i \ge n\)</td>
            <td>\(\{\}\) (consumes \(a_0 \ldots a_n\) immediately)</td>
        </tr>

        <tr>
            <td>Std</td>
            <td>enumerate</td>
            <td colspan="2">\(\{a_0, a_1, \ldots\}\)</td>
            <td>\(\{(0, a_0), (1, a_1), \ldots\}\)</td>
        </tr>

        <tr>
            <td>Std</td>
            <td>filter</td>
            <td>\(\{a_0, a_1, \ldots\}\),</td>
            <td>\(p : \&amp;T \rightarrow \text{bool}\)</td>
            <td>\(\{a_i \text{ for all } i \text{ wh. } p(\&amp;a_i)\}\)</td>
        </tr>

        <tr>
            <td>Std</td>
            <td>filter_map</td>
            <td>\(\{a_0, a_1, \ldots\}\),</td>
            <td>\(f : T \rightarrow \text{Some}(U) ~|~ \text{None}\)</td>
            <td>\(\{x_i \text{ for all } i \text { where } f(a_i) = \text{Some}(x_i)\}\)</td>
        </tr>

        <tr>
            <td>Std</td>
            <td>flat_map</td>
            <td>\(\{a_0, a_1, \ldots\}\),</td>
            <td>\(f : T \rightarrow \{U\}\)</td>
            <td>\(\{\underbrace{x_0, x_1, \ldots}_{x = f(a_0)},
                    \underbrace{y_0, y_1, \ldots}_{y = f(a_1)}, \ldots\}\)</td>
        </tr>

        <tr>
            <td>IT</td>
            <td>group_by</td>
            <td>\(\{\underbrace{a_0, \ldots, a_{i-1}}_{g(a_x) = g_0},
                \underbrace{a_i, \ldots, a_{j-1}}_{g(a_y) = g_1 \ne g_0},
                \underbrace{a_j, \ldots, a_{k-1}}_{g(a_z) = g_2 \ne g_1},
                \ldots\}\),</td>
            <td>\(g : \&amp;T \rightarrow G\)</td>
            <td>\(
                \{
                    (g_0, [a_0, \ldots, a_{i-1}]),\\~~
                    (g_1, [a_i, \ldots, a_{j-1}]),\\~~
                    (g_2, [a_j, \ldots, a_{k-1}]),
                    \ldots
                \}
            \)</td>
        </tr>

        <tr>
            <td rowspan="3">IT</td>
            <td rowspan="3">interleave</td>
            <td>\(\{a_0, a_1, \ldots, a_{i-1}, a_i, \ldots\}\)</td>
            <td>\(\{b_0, b_1, \ldots, b_{i-1}\}\)</td>
            <td>\(\{a_0, b_0, a_1, b_1, \ldots, a_{i-1}, b_{i-1}, a_i, \ldots\}\)</td>
        </tr>
        <tr>
            <td>\(\{a_0, a_1, \ldots, a_{i-1}\}\)</td>
            <td>\(\{b_0, b_1, \ldots, b_{i-1}\}\)</td>
            <td>\(\{a_0, b_0, a_1, b_1, \ldots, a_{i-1}, b_{i-1}\}\)</td>
        </tr>
        <tr>
            <td>\(\{a_0, a_1, \ldots, a_{i-1}\}\)</td>
            <td>\(\{b_0, b_1, \ldots, b_{i-1}, b_i, \ldots\}\)</td>
            <td>\(\{a_0, b_0, a_1, b_1, \ldots, a_{i-1}, b_{i-1}, b_i, \ldots\}\)</td>
        </tr>

        <tr>
            <td>IT</td>
            <td>intersperse</td>
            <td>\(\{a_0, a_1, \ldots, a_{n-1}\}\)</td>
            <td>\(b\)</td>
            <td>\(\{a_0, b, a_1, b, \ldots, b, a_{n-1}\}\)</td>
        </tr>

        <tr>
            <td>Std</td>
            <td>map</td>
            <td>\(\{a_0, a_1, \ldots\}\),</td>
            <td>\(f : T \rightarrow U\)</td>
            <td>\(\{f(a_0), f(a_1), \ldots\}\)</td>
        </tr>

        <tr>
            <td>IT</td>
            <td>map_fn</td>
            <td>\(\{a_0, a_1, \ldots\}\),</td>
            <td>\(f : \text{fn}(T) \rightarrow U\)</td>
            <td>\(\{f(a_0), f(a_1), \ldots\}\)</td>
        </tr>

        <tr>
            <td>IT</td>
            <td>mend_slices</td>
            <td colspan="2">
                \(
                    \{
                        \&amp;[x_0, \ldots, x_{i-1}], \&amp;[x_i, \ldots, x_{n-1}],\\~~
                        \&amp;[y_0, \ldots, y_{m-1}],\\~~
                        \&amp;[z_0, \ldots, z_{l-1}],
                        \ldots
                    \}
                \)
            </td>
            <td>
                \(
                    \{
                        \&amp;[x_0, \ldots, x_{i-1}, x_i, \ldots, x_{n-1}],\\~~
                        \&amp;[y_0, \ldots, y_{m-1}],\\~~
                        \&amp;[z_0, \ldots, z_{l-1}],
                        \ldots
                    \}
                \)
            </td>
        </tr>

        <tr>
            <td rowspan="1">IT</td>
            <td rowspan="1">merge</td>
            <td rowspan="1">\(\{a_0, a_1, \ldots\} \text{ wh. } a_0 \le a_1 \le \ldots\),</td>
            <td rowspan="1">\(\{b_0, b_1, \ldots\} \text{ wh. } b_0 \le b_1 \le \ldots\)</td>
            <td>\(\{c_0, c_1, \ldots\} \text{ wh. } c_0 \le c_1 \le \ldots, a \subseteq c, b \subseteq c\)</td>
        </tr>

        <tr>
            <td rowspan="1">IT</td>
            <td rowspan="1">merge_by</td>
            <td rowspan="1">\(\{a_0, a_1, \ldots\} \text{ wh. } a_0 \circ a_1 \circ \ldots\),</td>
            <td rowspan="1">\(\{b_0, b_1, \ldots\} \text{ wh. } b_0 \circ b_1 \circ \ldots\),
                \({}\circ{} : (\&amp;T,\&amp;T) -> \text{Ordering}\)</td>
            <td>\(\{c_0, c_1, \ldots\} \text{ wh. } c_0 \circ c_1 \circ \ldots, a \subseteq c, b \subseteq c\)</td>
        </tr>

        <tr>
            <td>Std</td>
            <td>partition</td>
            <td>\(\{a_0, a_1, \ldots\}\)</td>
            <td>\(f: \text{&amp;}T \rightarrow \text{bool}\)</td>
            <td>\(([a_i \text{ for all } i \text{ wh. } f(\&amp;a_i) = \text{true}], \\~~
                [a_i \text{ for all } i \text{ wh. } f(\&amp;a_i) = \text{false}])\)</td>
        </tr>

        <tr>
            <td>Std</td>
            <td>rev</td>
            <td colspan="2">\(\{a_0, a_1, \ldots, a_{n-2}, a_{n-1}\}\)</td>
            <td>\(\{a_{n-1}, a_{n-2}, \ldots, a_1, a_0\}\)</td>
        </tr>

        <tr>
            <td>Std</td>
            <td>scan</td>
            <td>\(\{a_0, a_1, \ldots\}\),</td>
            <td>\(s : \text{&amp;mut }S\), \(f : (\text{&amp;mut }S, T) \rightarrow \text{Some}(U) ~|~ \text{None}\)</td>
            <td>\(\{x_i \text{ for all } i \text{ wh. } f(s, a_i) = Some(x_i)\}\)</td>
        </tr>

        <tr>
            <td rowspan="2">Std</td>
            <td rowspan="2">skip</td>
            <td>\(\{a_0, \ldots, a_{i-1}, a_{i}, \ldots\}\),</td>
            <td>\(i\)</td>
            <td>\(\{a_{i}, \ldots\}\)</td>
        </tr>
        <tr>
            <td>\(\{a_0, \ldots, a_{n-1}\}\),</td>
            <td>\(i \text{ wh. } i \ge n\)</td>
            <td>\(\{\}\)</td>
        </tr>

        <tr>
            <td>Std</td>
            <td>skip_while</td>
            <td>\(\{a_0, \ldots, a_i, \ldots\}\),</td>
            <td>\(p : \&amp;T \rightarrow \text{bool}\)</td>
            <td>\(\{a_i, \ldots\} \text{ wh. } i \text{ is first wh. } p(\&amp;a_i) \)</td>
        </tr>

        <tr>
            <td rowspan="3">IT</td>
            <td rowspan="3">slice</td>
            <td rowspan="2">\(\{a_0, \ldots, a_i, \ldots, a_j, \ldots\}\),</td>
            <td>\(..j\)</td>
            <td>\(\{a_0, \ldots, a_i, \ldots, a_{j-1}\}\)</td>
        </tr>
        <tr>
            <td>\(i..\)</td>
            <td>\(\{a_i, \ldots, a_{j-1}, \ldots\}\)</td>
        </tr>
        <tr>
            <td>\(\{a_0, \ldots, a_i, \ldots, \underline{a_j, \ldots}\}\),</td>
            <td>\(i..j\)</td>
            <td>\(\{a_i, \ldots, a_{j-1}\}\)</td>
        </tr>

        <tr>
            <td>IT</td>
            <td>step</td>
            <td>\(\{a_0, \ldots, a_m, \ldots, a_{2m}, \ldots\}\),</td>
            <td>m</td>
            <td>\(\{a_0, a_m, a_{2m}, \ldots\}\)</td>
        </tr>

        <tr>
            <td rowspan="2">Std</td>
            <td rowspan="2">take</td>
            <td>\(\{a_0, \ldots, a_{i-1}, \underline{a_{i}, \ldots}\}\),</td>
            <td>\(i\)</td>
            <td>\(\{a_0, \ldots, a_{i-1}\}\)</td>
        </tr>
        <tr>
            <td>\(\{a_0, \ldots, a_{n-1}\}\),</td>
            <td>\(i \text{ wh. } i \ge n\)</td>
            <td>\(\{a_0, \ldots, a_{n-1}\}\)</td>
        </tr>

        <tr>
            <td>Std</td>
            <td>take_while</td>
            <td>\(\{a_0, \ldots, a_{i-1}, a_i, \underline{\ldots}\}\),</td>
            <td>\(p : \&amp;T \rightarrow \text{bool}\)</td>
            <td>\(\{a_0, \ldots, a_{i-1}\} \text{ wh. } i \text{ is first wh. } p(\&amp;a_i) = \text{false} \)</td>
        </tr>

        <tr>
            <td>IT</td>
            <td>take_while_ref</td>
            <td>\(\text{&amp;mut }\{a_0, \ldots, a_{i-1}, \underline{a_i, \ldots}\}\),</td>
            <td>\(p : \&amp;T \rightarrow \text{bool}\)</td>
            <td>\(\{a_0, \ldots, a_{i-1}\} \text{ wh. } i \text{ is first wh. } p(\&amp;a_i) = \text{false} \)</td>
        </tr>

        <tr>
            <td>IT</td>
            <td>tee</td>
            <td colspan="2">\(\{a_0, a_1, \ldots\}\)</td>
            <td>\((\{a_0, a_1, \ldots\}, \{a_0, a_1, \ldots\})\)</td>
        </tr>

        <tr>
            <td>Std</td>
            <td>unzip</td>
            <td colspan="2">\(\{(a_0, b_0), (a_1, b_1), \ldots\}\)</td>
            <td>\(([a_0, a_1, \ldots], [b_0, b_1, \ldots])\)</td>
        </tr>

        <tr>
            <td rowspan="2">Std</td>
            <td rowspan="2">zip</td>
            <td>\(\{a_0, \ldots, a_i\}\),</td>
            <td>\(\{b_0, \ldots, b_i, \underline{b_{i+1}, \ldots}\}\)</td>
            <td rowspan="2">\(\{(a_0, b_0), \ldots, (a_i, b_i)\}\)</td>
        </tr>
        <tr>
            <td>\(\{a_0, \ldots, a_i, a_{i+1}, \underline{\ldots}\}\),</td>
            <td>\(\{b_0, \ldots, b_i\}\)</td>
        </tr>

        <tr>
            <td rowspan="3">IT</td>
            <td rowspan="3">zip_longest</td>
            <td>\(\{a_0, \ldots, a_{i-1}, a_i, \ldots\}\)</td>
            <td>\(\{b_0, \ldots, b_{i-1}\}\)</td>
            <td>\(\{\text{Both}(a_0, b_0), \ldots, \text{Both}(a_{i-1}, b_{i-1}), \text{Left}(a_i), \ldots\}\)</td>
        </tr>
        <tr>
            <td>\(\{a_0, \ldots, a_{i-1}\}\)</td>
            <td>\(\{b_0, \ldots, b_{i-1}\}\)</td>
            <td>\(\{\text{Both}(a_0, b_0), \ldots, \text{Both}(a_{i-1}, b_{i-1})\}\)</td>
        </tr>
        <tr>
            <td>\(\{a_0, \ldots, a_{i-1}\}\)</td>
            <td>\(\{b_0, \ldots, b_{i-1}, b_i, \ldots\}\)</td>
            <td>\(\{\text{Both}(a_0, b_0), \ldots, \text{Both}(a_{i-1}, b_{i-1}), \text{Right}(b_i), \ldots\}\)</td>
        </tr>
    </tbody>
    </table>

    <h2>Values</h2>

    <table class="summary">
    <thead>
        <tr>
            <th>Lib</th>
            <th>Method</th>
            <th colspan="2">Input</th>
            <th>Output</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td rowspan="2">Std</td>
            <td rowspan="2">all</td>
            <td>\(\text{&amp;mut }\{a_0, \ldots, a_{i-1}, a_i, \underline{\ldots}\}\)</td>
            <td rowspan="2">\(p:T \rightarrow \text{bool}\)</td>
            <td>\(p(a_0) \land \ldots \land p(a_{i-1}) \text{ wh. } i \text{ is first wh. } p(a_i) = \text{false}\)</td>
        </tr>
        <tr>
            <td>\(\text{&amp;mut }\{\}\)</td>
            <td>\(\text{true}\)</td>
        </tr>

        <tr>
            <td rowspan="2">Std</td>
            <td rowspan="2">any</td>
            <td>\(\text{&amp;mut }\{a_0, \ldots, a_{i-1}, a_i, \underline{\ldots}\}\)</td>
            <td rowspan="2">\(p:T \rightarrow \text{bool}\)</td>
            <td>\(p(a_0) \lor \ldots \lor p(a_{i-1}) \text{ wh. } i \text{ is first wh. } p(a_i)\)</td>
        </tr>
        <tr>
            <td>\(\text{&amp;mut }\{\}\)</td>
            <td>\(\text{false}\)</td>
        </tr>

        <tr>
            <td>Std</td>
            <td>count</td>
            <td colspan="2">\(\{\underbrace{\ldots}_{n}\}\)</td>
            <td>\(n\)</td>
        </tr>

        <tr>
            <td rowspan="2">IT</td>
            <td rowspan="2">dropn</td>
            <td>\(\text{&amp;mut }\{\underbrace{a_0, \ldots, a_{i-1}}_{\text{consumed}}, \underline{a_i, \ldots}\}\)</td>
            <td>\(i \text{ wh. } i \le n\)</td>
            <td>\(i\)</td>
        </tr>
        <tr>
            <td>\(\text{&amp;mut }\{\underbrace{a_0, \ldots, a_{n-1}}_{\text{consumed}}\}\)</td>
            <td>\(i \text{ wh. } i \gt n\)</td>
            <td>\(n\)</td>
        </tr>

        <tr>
            <td>Std</td>
            <td>find</td>
            <td>\(\text{&amp;mut }\{a_0, \ldots, a_i, \underline{\ldots}\}\),</td>
            <td>\(p : T \rightarrow \text{bool}\)</td>
            <td>
                \(\begin{array}{ll}
                    \text{Some}(a_i) &amp;\text{wh. } i \text{ is first wh. } p(\&amp;a_i) \\
                    \text{None} &amp; \text{otherwise}
                \end{array}\)
            </td>
        </tr>

        <tr>
            <td>IT</td>
            <td>find_position</td>
            <td>\(\text{&amp;mut }\{a_0, \ldots, a_i, \underline{\ldots}\}\),</td>
            <td>\(p : T \rightarrow \text{bool}\)</td>
            <td>
                \(\begin{array}{ll}
                    \text{Some}((i, a_i)) &amp;\text{wh. } i \text{ is first wh. } p(\&amp;a_i) \\
                    \text{None} &amp; \text{otherwise}
                \end{array}\)
            </td>
        </tr>

        <tr>
            <td rowspan="2">Std</td>
            <td rowspan="2">fold</td>
            <td>\(\{a_0, a_1, \ldots\}\),</td>
            <td rowspan="2">\(init : U\), \(\circ : (U,T) \rightarrow U\)</td>
            <td>\((((init \circ a_0) \circ a_1) \circ \ldots)\)</td>
        </tr>
        <tr>
            <td>\(\{\}\)</td>
            <td>\(init\)</td>
        </tr>

        <tr>
            <td rowspan="3">IT</td>
            <td rowspan="3">fold1</td>
            <td>\(\{a_0, a_1, a_2, \ldots\}\),</td>
            <td rowspan="3">\(\circ : (T,T) \rightarrow T\)</td>
            <td>\(\text{Some}(((a_0 \circ a_1) \circ a_2) \circ \ldots)\)</td>
        </tr>
        <tr>
            <td>\(\{a_0\}\)</td>
            <td>\(\text{Some}(a_0)\)</td>
        </tr>
        <tr>
            <td>\(\{\}\)</td>
            <td>\(\text{None}\)</td>
        </tr>

        <tr>
            <td rowspan="3">IT</td>
            <td rowspan="3">fold_results</td>
            <td>\(\text{&amp;mut }\{a_0, \ldots\}\),</td>
            <td rowspan="3">\(init : U\), \(\circ : (U,T) \rightarrow U\)</td>
            <td>
                \(
                    \text{Ok}(\text{fold}(x, \circ)) \text{ wh. }
                        x = \{x_i \text{ wh. all } a_i = \text{Ok}(x_i)\}
                \)
            </td>
        </tr>
        <tr>
            <td>\(\text{&amp;mut }\{\ldots, a_i, \underline{\ldots}\} \text{ wh. } a_i = text{Err}(..)\),</td>
            <td>
                \(
                    \text{Err}(e) \text{ wh. }
                        i \text{ is first wh. } a_i = \text{Err}(e)
                \)
            </td>
        </tr>
        <tr>
            <td>\(\text{&amp;mut }\{\}\)</td>
            <td>\(\text{Ok}(init)\)</td>
        </tr>

        <tr>
            <td rowspan="2">Std</td>
            <td rowspan="2">last</td>
            <td colspan="2">\(\{\ldots, a_{n-1}\}\)</td>
            <td>\(\text{Some}(a_{n-1})\)</td>
        </tr>
        <tr>
            <td colspan="2">\(\{\}\)</td>
            <td>\(\text{None}\)</td>
        </tr>

        <tr>
            <td>IT</td>
            <td>join</td>
            <td>\(\{a_0, a_1, \ldots\, a_{n-1}\}\),</td>
            <td>\(sep: \text{&amp;str}\)</td>
            <td>\(
                \begin{array}{ll}
                d(a_0) \circ sep \circ d(a_1) \circ \ldots \circ sep \circ d(a_{n-1}) \text { wh.}\\~~
                d \text{ is Display::fmt, } \circ \text{ is string concatenation} \\
                \end{array}
                \)
            </td>
        </tr>


        <tr>
            <td rowspan="3">Std</td>
            <td rowspan="3">max</td>
            <td colspan="2">\(\{a_0, a_1, a_2, \ldots\}\)</td>
            <td>\(\text{Some}(max(max(max(a_0, a_1), a_2), \ldots))\)</td>
        </tr>
        <tr>
            <td colspan="2">\(\{a_0\}\)</td>
            <td>\(\text{Some}(a_0)\)</td>
        </tr>
        <tr>
            <td colspan="2">\(\{\}\)</td>
            <td>\(\text{None}\)</td>
        </tr>

        <tr data-tags="unstable">
            <td rowspan="3">Std</td>
            <td rowspan="3">max_by</td>
            <td>\(\{a_0, \ldots\}\)</td>
            <td rowspan="3">\(f : \&amp;T \rightarrow B\)</td>
            <td>\(\text{Some}(a_i) : b = max(\{f(a_0), \ldots\}), i \text{ is the last wh. } f(a_i) = b\)</td>
        </tr>
        <tr data-tags="unstable">
            <td>\(\{a_0\}\)</td>
            <td>\(\text{Some}(a_0)\)</td>
        </tr>
        <tr data-tags="unstable">
            <td>\(\{\}\)</td>
            <td>\(\text{None}\)</td>
        </tr>

        <tr>
            <td rowspan="3">Std</td>
            <td rowspan="3">min</td>
            <td colspan="2">\(\{a_0, a_1, a_2, \ldots\}\)</td>
            <td>\(\text{Some}(min(min(min(a_0, a_1), a_2), \ldots))\)</td>
        </tr>
        <tr>
            <td colspan="2">\(\{a_0\}\)</td>
            <td>\(\text{Some}(a_0)\)</td>
        </tr>
        <tr>
            <td colspan="2">\(\{\}\)</td>
            <td>\(\text{None}\)</td>
        </tr>

        <tr data-tags="unstable">
            <td rowspan="3">Std</td>
            <td rowspan="3">min_by</td>
            <td>\(\{a_0, \ldots\}\)</td>
            <td rowspan="3">\(f : \&amp;T \rightarrow B\)</td>
            <td>\(\text{Some}(a_i) : b = min(\{f(a_0), \ldots\}), i \text{ is the first wh. } f(a_i) = b\)</td>
        </tr>
        <tr data-tags="unstable">
            <td>\(\{a_0\}\)</td>
            <td>\(\text{Some}(a_0)\)</td>
        </tr>
        <tr data-tags="unstable">
            <td>\(\{\}\)</td>
            <td>\(\text{None}\)</td>
        </tr>

        <tr data-tags="unstable">
            <td rowspan="3">Std</td>
            <td rowspan="3">min_max</td>
            <td colspan="2">\(\{a_0, \ldots\}\)</td>
            <td>\(\text{MinMax}(min(\{a_0, \ldots\}), max(\{a_0, \ldots\}))\)</td>
        </tr>
        <tr data-tags="unstable">
            <td colspan="2">\(\{a_0\}\)</td>
            <td>\(\text{OneElement}(a_0)\)</td>
        </tr>
        <tr data-tags="unstable">
            <td colspan="2">\(\{\}\)</td>
            <td>\(\text{NoElements}\)</td>
        </tr>

        <tr>
            <td rowspan="2">Std</td>
            <td rowspan="2">nth</td>
            <td>\(\text{&amp;mut }\{\underbrace{\ldots}_{i-1}, a_i, \underline{\ldots}\}\),</td>
            <td>\(i\)</td>
            <td>\(\text{Some}(a_i)\)</td>
        </tr>
        <tr>
            <td>\(\text{&amp;mut }\{\underbrace{\ldots}_{{}&lt;i}\}\),</td>
            <td>\(i\)</td>
            <td>\(\text{None}\)</td>
        </tr>

        <tr>
            <td>Std</td>
            <td>position</td>
            <td>\(\text{&amp;mut }\{a_0, \ldots, a_i, \underline{\ldots}\}\),</td>
            <td>\(p : T \rightarrow \text{bool}\)</td>
            <td>
                \(\begin{array}{ll}
                    \text{Some}(i) &amp;\text{wh. } i \text{ is first wh. } p(\&amp;a_i) \\
                    \text{None} &amp; \text{otherwise}
                \end{array}\)
            </td>
        </tr>

        <tr data-tags="unstable">
            <td rowspan="3">Std</td>
            <td rowspan="3">product</td>
            <td colspan="2">\(\{a_0, a_1, \ldots\}\)</td>
            <td>\(((a_0 \times a_1) \times \ldots)\)</td>
        </tr>
        <tr data-tags="unstable">
            <td colspan="2">\(\{a_0\}\)</td>
            <td>\(a_0\)</td>
        </tr>
        <tr data-tags="unstable">
            <td colspan="2">\(\{\}\)</td>
            <td>\(1\)</td>
        </tr>

        <tr>
            <td>Std</td>
            <td>rposition</td>
            <td>\(\text{&amp;mut }\{\underline{a_0, \ldots}, a_i, \ldots\}\),</td>
            <td>\(p : T \rightarrow \text{bool}\)</td>
            <td>
                \(\begin{array}{ll}
                    \text{Some}(i) &amp;\text{wh. } i \text{ is last wh. } p(\&amp;a_i) \\
                    \text{None} &amp; \text{otherwise}
                \end{array}\)
            </td>
        </tr>

        <tr>
            <td rowspan="3">IT</td>
            <td rowspan="3">set_from</td>
            <td>\(\text{&amp;mut }\{a_0, \ldots, a_{i-1}, \underline{a_i, \ldots}\} : \{\text{&amp;mut }T\}\)</td>
            <td>\(\{b_0, \ldots, b_{i-1}\} : \{T\}\)</td>
            <td rowspan="3">\(i\), with side effect: \(\circ a_j = b_j\)</td>
        </tr>
        <tr>
            <td>\(\text{&amp;mut }\{a_0, \ldots, a_{i-1}\} : \{\text{&amp;mut }T\}\)</td>
            <td>\(\{b_0, \ldots, b_{i-1}\} : \{T\}\)</td>
        </tr>
        <tr>
            <td>\(\text{&amp;mut }\{a_0, \ldots, a_{i-1}\} : \{\text{&amp;mut }T\}\)</td>
            <td>\(\{b_0, \ldots, b_{i-1}, \underline{b_i, \ldots}\} : \{T\}\)</td>
        </tr>

        <tr data-tags="unstable">
            <td rowspan="3">Std</td>
            <td rowspan="3">sum</td>
            <td colspan="2">\(\{a_0, a_1, \ldots\}\)</td>
            <td>\(((a_0 + a_1) + \ldots)\)</td>
        </tr>
        <tr data-tags="unstable">
            <td colspan="2">\(\{a_0\}\)</td>
            <td>\(a_0\)</td>
        </tr>
        <tr data-tags="unstable">
            <td colspan="2">\(\{\}\)</td>
            <td>\(0\)</td>
        </tr>
    </tbody>
    </table>

    <h2>Other</h2>

    <table class="summary">
    <thead>
        <tr>
            <th>Lib</th>
            <th>Method</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Std</td>
            <td>cloned</td>
            <td>Returns an iterator which calls <code>Clone::clone</code> on each element of the input.  This is commonly used to turn an <code>Iterator&lt;Item=&amp;T></code> into an <code>Iterator&lt;Item=T></code>.</td>
        </tr>

        <tr>
            <td>Std</td>
            <td>by_ref</td>
            <td>Lets you act on a sequence by reference; <em>i.e.</em> calls that would normally <em>consume</em> the iterator will no longer do so.  Note that this can have slightly unintuitive effects depending on what iterator methods are used on the result.  <em>e.g.</em> \(\text{take_while}\) must <em>necessarily</em> consume one more element than is returned in order to detect the termination condition; this element is consumed and does not remain in the underlying sequence.</td>
        </tr>

        <tr>
            <td>IT</td>
            <td>foreach</td>
            <td>Eagerly executes a closure \(f\) on each element of the sequence.</td>
        </tr>

        <tr>
            <td>Std</td>
            <td>fuse</td>
            <td>Guarantees that once the input returns \(\text{None}\), it will <em>always</em> return \(\text{None}\).</td>
        </tr>

        <tr>
            <td>Std</td>
            <td>inspect</td>
            <td>Calls a closure for each element in a sequence, without modifying the sequence in any way.</td>
        </tr>

        <tr>
            <td>IT</td>
            <td>into_rc</td>
            <td>Moves the sequence into a <code>Rc&lt;RefCell&lt;_>></code>, allowing access to the iterator to be shared.</td>
        </tr>

        <tr>
            <td>IT</td>
            <td>is_empty_hint</td>
            <td>Indicates whether or not the sequence is empty, and how sure of this it is.  The answer is based on the result of <code>Iterator::size_hint</code>.  Assuming that <code>size_hint</code> is accurate, \(\text{is_empty_hint}\) will return \(\text{Some}(\text{true}|\text{false})\) if it can determine that the sequence is empty or not-empty, \(\text{None}\) otherwise.</td>
        </tr>

        <tr>
            <td>IT</td>
            <td>multipeek</td>
            <td>Allows you to preview (peek at) an unbounded number of future items in the sequence without removing them.</td>
        </tr>

        <tr>
            <td>Std</td>
            <td>peekable</td>
            <td>Allows you to preview (peek at) the next item in the sequence without removing it.</td>
        </tr>

        <tr data-tags="unstable">
            <td>Std</td>
            <td>reverse_in_place</td>
            <td>Consumes an <code>Iterator&lt;Item=&amp;mut T></code> (typically derived from some container), and reverses the order of the elements being pointed to.</td>
        </tr>
    </tbody>
    </table>

    <h2>Notes</h2>

    <dl class="qna">
        <dt>Q: Who is the audience for this?</dt>
        <dd>
            <p>Definitely <em>not</em> absolute beginners!</p>
            <p>The problem is that beginner-friendly descriptions of the available iterator methods are long and wordy, which makes them difficult to quickly scan through.  Summarising them requires notation, and there are enough different kinds of behaviours that the notation needs to be relatively extensive.</p>
            <p>I've <em>tried</em> to keep the notation used as simple as possible, but that can only go so far.  My <em>primary</em> concern with this is creating a summary that can be skimmed relatively quickly, not to make iterators accessible to beginners.</p>
        </dd>
    </dl>

    <p>This work is licensed under the <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</p>

    <script class="build-only" type="text/javascript">

    "use strict";

    // Add library source classes.
    var LIBS = {
        'std': {
            'name': 'std',
            'display': 'Std',
            'trait_url': "http://doc.rust-lang.org/std/iter/trait.Iterator.html",
        },
        'itertools': {
            'name': 'itertools',
            'display': 'IT',
            'trait_url': "https://bluss.github.io/rust-itertools/doc/itertools/trait.Itertools.html",
        },
    };

    function do_trs(trs, lib_name) {
        trs.addClass("lib-"+lib_name);
        trs.attr("data-lib", lib_name);
    }

    for (var lib_name in LIBS) {
        var lib = LIBS[lib_name];

        var lib_tds = $("table.summary tr > td:nth-child(1):contains('"+lib.display+"')");
        var lib_tds = lib_tds.toArray();

        // Do it this way so that we can handle rowspan'd summaries.
        for (var i = 0; i < lib_tds.length; i++) {
            var lib_td = lib_tds[i];
            $(lib_td).addClass("lib");
            $(lib_td.nextElementSibling).addClass("method-name");

            var rows = (+lib_td.getAttribute("rowspan")) || 1;

            var cur_tr = lib_td.parentNode;

            // This one, and this one *alone*, gets `.primary`.
            $(cur_tr).addClass("primary");

            // Now process them all.
            for (var j = 0; j < rows; j++) {
                do_trs($(cur_tr), lib.name);
                cur_tr = cur_tr.nextElementSibling;
            };
        };
    };

    // Promote tags to classes.
    $("table.summary tr[data-tags]").each(function () {
        var self = $(this)[0];
        var tags = self.getAttribute("data-tags").trim().split(/\s+/);
        for (var i = 0; i < tags.length; i++) {
            var tag = tags[i];
            self.classList.add("tag-"+tag);
        };
    });

    // Reformat all the method names in the summary.
    $("table.summary tr.primary > td:nth-child(2)").each(function () {
        var self = $(this)[0];
        var name = $(this).text();

        var lib = $(this)[0].parentNode.getAttribute("data-lib");
        var doc_url = $(this)[0].getAttribute("data-doc-link");

        // Guess at the doc link if one wasn't provided.
        if(!doc_url)
            doc_url = LIBS[lib].trait_url + "#method." + name;

        // Let MathJax format this for consistency.
        $(this).text("\\(\\text{" + name + "}\\)");

        // Set up link.
        $(this).wrapInner("<a href=\""+doc_url+"\"></a>");
    });

    // Kill all build nodes.
    $(".cut-during-build").remove();
    $(".build-only").remove();

    </script><script type="text/javascript">

    "use strict";

    // Set up filters.
    function check_elem_vis(elem, filters) {
        for (var i = 0; i < elem.classList.length; i++) {
            var klass = elem.classList[i];
            if(klass.search(/^lib-|tag-/) === 0) {
                if(filters[klass] !== true) {
                    return false;
                }
            }
        }
        return true;
    }

    function get_filters() {
        var filters = {};

        var lib_toggles = document.querySelectorAll("input.lib-toggle");
        for (var i = 0; i < lib_toggles.length; i++) {
            var lib_toggle = lib_toggles[i];
            var name = lib_toggle.getAttribute("data-lib");
            filters['lib-'+name] = lib_toggle.checked;
        };

        var tag_toggles = document.querySelectorAll("input.tag-toggle");
        for (var i = 0; i < tag_toggles.length; i++) {
            var tag_toggle = tag_toggles[i];
            var name = tag_toggle.getAttribute("data-tag");
            filters['tag-'+name] = tag_toggle.checked;
        };

        return filters;
    }

    function handle_filter_change(filter_changed) {
        var filters = get_filters();

        var query;
        if(filter_changed === '*')
            query = "table.summary tr";
        else
            query = "table.summary tr." + filter_changed;

        var trs = document.querySelectorAll(query);

        for (var i = 0; i < trs.length; i++) {
            var tr = trs[i];
            var display_val;
            if(check_elem_vis(tr, filters)) display_val = "";
            else display_val = "none";
            tr.style.display = display_val;
        };
    }

    function handle_lib_toggle(elem) {
        var lib = elem.getAttribute("data-lib");
        handle_filter_change("lib-"+lib);
    }

    function handle_tag_toggle(elem) {
        var tag = elem.getAttribute("data-tag");
        handle_filter_change("tag-"+tag);
    }

    (function () {
        var lib_toggles = document.querySelectorAll("input.lib-toggle[type='checkbox']");
        for (var i = 0; i < lib_toggles.length; i++) {
            var lib_toggle = lib_toggles[i];
            lib_toggle.addEventListener("change", function(){handle_lib_toggle(this)});
        };

        var tag_toggles = document.querySelectorAll("input.tag-toggle[type='checkbox']");
        for (var i = 0; i < tag_toggles.length; i++) {
            var tag_toggle = tag_toggles[i];
            tag_toggle.addEventListener("change", function(){handle_tag_toggle(this)});
        };

        handle_filter_change('*');
    })();

    </script>
</body>
</html>
